<<<<<<< HEAD
1. 问：Spk88.2k，Mic176.4k采样率时不能录音？

    答：要把Codec的FIFO level从8改成4；本质应该和192k 24bit的问题一样。



2. 问：降噪算法的音量设置问题？

    答：降噪算法的音量如果设的过大，有可能导致输出结果削顶。经过我的测试，如果算法音量设成100，则输入的幅值不能超过1.5k左右；如果输入的是一个满量程正弦波，则算法音量不能超过3。需要根据前级增益的情况来合理设置算法音量大小。



3. 问：I2C做从机使用时的注意事项？

    答：I2C做从机使用时，必须确保中断能及时响应。例如，当主机向从机写数据时，从机必须在rx fifo满之前进i2c中断读出fifo中的数据。考虑极限情况下，如果I2C速率是100k，那么从起始位开始到主机写满fifo深度的8个数据共需约800us左右，如果i2c速率是400k则为200us左右，这要求其他硬中断的处理时间不能超过这个值。实际时如有必要，可在I2C从机的起始位中断里关闭一些耗时高的应用，在停止位中断中再打开；并且I2C做从机使用时的中断优先级应尽可能提高。做主机使用则没有这么多限制。



4. 问：麦克风采集的声音信号有偏置？

    答：打开ADC配置里面的高通滤波器可以消除偏置。



5. 问：USB的上下行信号波形有抖动？

    答：打开ADC和DAC的AIAS，确保Fifo有足够的缓存空间。



6. 问：Fifo提示有溢出，串口打印“add xxx full!"？

    答：只出现一次是正常的，如果持续多次出现就是通路数据同步问题，可能是采样率或者通道配置错误，也可能是通路效率不够。



7. 问：8600的DAC驱动喇叭在上电和掉电时有POP音？

    答：1、上电时先将DAC静音，等DAC初始化完后再解除静音
           2、掉电可以在codec中断里面检测，判断是掉电了就将DAC静音



8. 问：通过硬件EQ处理的信号会产生偏置，容易出现POP音等问题？
    答：1、改为只用软件EQ，2、静音信号0数据也通过EQ处理，避免音频信号跳变的问题。



9. 问：onFifoReady函数里面的参数frameLen和函数返回值的关系？

    答：参数frameLen是描述每个pickFifo的每次可处理的数据字节长度，一般每个pickFifo读取的数据长度是一样的，返回值是描述pokeFifo里面每次写进去的数据长度。



10. 问：配置没有USB的音频通路，DAC会出现没有声音的情况？

      答：将hw_desc.c中dac的配置选项useSwGain配置成false，建议将释放给客户的SDK将hw_desc.c文件开放出来。



11. 问：I2S和其他蓝牙芯片通信，如果蓝牙要求的有效位在低16位，bitslot配置成24bit声音有问题？

      答：bitslot配置成32bit



12. 问：Mic和Spk静音在切换采样率过程中会出现无效以及USB不能正常工作的情况？

      答：去掉在mic和spk静音时设置codec的ADC和DAC mute函数中的打印。



=======
1. 问：Spk88.2k，Mic176.4k采样率时不能录音？

    答：要把Codec的FIFO level从8改成4；本质应该和192k 24bit的问题一样。



2. 问：降噪算法的音量设置问题？

    答：降噪算法的音量如果设的过大，有可能导致输出结果削顶。经过我的测试，如果算法音量设成100，则输入的幅值不能超过1.5k左右；如果输入的是一个满量程正弦波，则算法音量不能超过3。需要根据前级增益的情况来合理设置算法音量大小。



3. 问：I2C做从机使用时的注意事项？

    答：I2C做从机使用时，必须确保中断能及时响应。例如，当主机向从机写数据时，从机必须在rx fifo满之前进i2c中断读出fifo中的数据。考虑极限情况下，如果I2C速率是100k，那么从起始位开始到主机写满fifo深度的8个数据共需约800us左右，如果i2c速率是400k则为200us左右，这要求其他硬中断的处理时间不能超过这个值。实际时如有必要，可在I2C从机的起始位中断里关闭一些耗时高的应用，在停止位中断中再打开；并且I2C做从机使用时的中断优先级应尽可能提高。做主机使用则没有这么多限制。



4. 问：麦克风采集的声音信号有偏置？

    答：打开ADC配置里面的高通滤波器可以消除偏置。



5. 问：USB的上下行信号波形有抖动？

    答：打开ADC和DAC的AIAS，确保Fifo有足够的缓存空间。



6. 问：Fifo提示有溢出，串口打印“add xxx full!"？

    答：只出现一次是正常的，如果持续多次出现就是通路数据同步问题，可能是采样率或者通道配置错误，也可能是通路效率不够。



7. 问：8600的DAC驱动喇叭在上电和掉电时有POP音？

    答：1、上电时先将DAC静音，等DAC初始化完后再解除静音
           2、掉电可以在codec中断里面检测，判断是掉电了就将DAC静音



8. 问：通过硬件EQ处理的信号会产生偏置，容易出现POP音等问题？
    答：1、改为只用软件EQ，2、静音信号0数据也通过EQ处理，避免音频信号跳变的问题。



9. 问：onFifoReady函数里面的参数frameLen和函数返回值的关系？

    答：参数frameLen是描述每个pickFifo的每次可处理的数据字节长度，一般每个pickFifo读取的数据长度是一样的，返回值是描述pokeFifo里面每次写进去的数据长度。



10. 问：配置没有USB的音频通路，DAC会出现没有声音的情况？

      答：将hw_desc.c中dac的配置选项useSwGain配置成false，建议将释放给客户的SDK将hw_desc.c文件开放出来。



11. 问：I2S和其他蓝牙芯片通信，如果蓝牙要求的有效位在低16位，bitslot配置成24bit声音有问题？

      答：bitslot配置成32bit



12. 问：Mic和Spk静音在切换采样率过程中会出现无效以及USB不能正常工作的情况？

      答：去掉在mic和spk静音时设置codec的ADC和DAC mute函数中的打印。



>>>>>>> origin
2022-10-24